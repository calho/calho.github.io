let hockeyApi=new HockeyAPI;function initiatePage(){fillTeamSelector(),fillPlayerSelector(!0),createGraph()}function fillTeamSelector(){hockeyApi.getTeams()}function fillPlayerSelector(e=!1){let t=document.getElementById("teamSelector");document.getElementById("playerSelector").options.length=0,hockeyApi.getRoster(t.options[t.selectedIndex].value,e)}function createGraph(){let e=document.getElementById("playerSelector"),t=new JsonResponse,o=[],l=[],n="",i=e.options[e.selectedIndex];hockeyApi.getPlayerStats(i.value,t);let s=t.response.splits;hockeyApi.getPlayerInformation(i.value,t),0===t.response.primaryPosition.code.localeCompare("G")?(s.forEach(function(e){if(e.league.hasOwnProperty("id")&&e.league.id===hockeyApi.getNHLId()){l.push(e.stat.savePercentage);let t=e.season;o.push(t.substring(0,4)+"-"+t.substring(4))}}),n="Save Percentage"):(s.forEach(function(e){if(e.league.hasOwnProperty("id")&&e.league.id===hockeyApi.getNHLId()&&e.stat.games>0){l.push(e.stat.points/e.stat.games);let t=e.season;o.push(t.substring(0,4)+"-"+t.substring(4))}}),n="Points Per Game");let a={x:o,y:l,name:i.text,type:"scatter"},r=Plotly.d3;document.getElementById("graph").remove();let c=r.select("#selectors").append("div").style({width:"60%","margin-left":"20%",height:"80vh","margin-top":"10vh"}).attr("id","graph").node(),p={showlegend:!0,legend:{x:100,y:1},xaxis:{title:"Season",titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"}},yaxis:{title:n,titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"}}},g=[a];Plotly.newPlot(c,g,p),window.onresize=function(){Plotly.Plots.resize(c)}}